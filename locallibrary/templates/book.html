{% load static %}
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1" name="viewport">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.bootcss.com/twitter-bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'image/' %}">
    <title>查询</title>

</head>
<body>

<!--导航栏-->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
        <!--登陆和注册的导航栏链接-->
        <a class="navbar-brand" href="/" style="font-size: 2rem">城市书吧</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExample07"
                aria-controls="navbarsExample07" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <!--判断是否登录-->
        {% csrf_token %}
        <div class="btn-group" role="group" style="font-size: 1rem">
            {% if request.session.user_name %}
            <p class="my-2 my-sm-0" style="color: white">欢迎您，读者</p>
            <a class="my-2 my-sm-0" href="/user" style="font-color: blue">
                <p class="my-2 my-sm-0">{{request.session.user_name}} </p>
            </a>
            <p class="my-2 my-sm-0" style="color: white"> | </p>
            <a href="/logout">
                <p class="my-2 my-sm-0">退出</p>
            </a>

            {% else %}
            <a href="/login" class="btn btn-outline-success">登录</a>
            <a href="/register" class="btn btn-outline-success">注册</a>

            {% endif %}
        </div>
    </div>
</nav>

{% block content %}
<div class="container" style="padding-top: 30px;">
    <!-- 加载图书详细信息 -->
    <div class="row">
        <div class="col-md-8 col-sm-10">

            {% csrf_token %}

            <h4 style="font-family: Helvetica Neue">{{ book.book_name }}</h4>

            <!-- 提示借阅操作的结果消息-->
            {% if messages %}
            {% for message in messages %}
            {% if message.tags == "error" %}
            <div class="alert alert-warning" role="alert">{{ message }}</div>
            {% endif %}
            {% if message.tags == "success" %}
            <div class="alert alert-info" role="alert">{{ message }}</div>
            {% endif %}
            {% endfor %}
            {% else %}

            <!--验证是否登录-->
            {% if request.session.user_name %}

            <div>
                <a href="/borrow/{{ book.book_isbn }}">
                    <button class="btn btn-outline-info my-2 my-sm-0">借书</button>
                </a>
                <a href="#">
                    <button class="btn btn-outline-info my-2 my-sm-0">收藏</button>
                </a>
            </div>
            {% else %}
            <div class="alert alert-warning" role="alert">您尚未登陆，不能对图书操作</div>
            {% endif %}

            {% endif %}


            <script>
                        function borrowconfirm(){
                            var check = confirm("R U Sure?");
                            if(check == true){
                                alert("sucessfully borrow!");
                            }else{
                                alert("error!");
                             }

                        }

            </script>

            <hr>
            <div class="row">
                <div class="col-md-8">
                    <p><strong>Author:</strong>{{ book.book_author }}</p>
                    <p><strong>ISBN:</strong> {{ book.book_isbn }}</p>
                    <p><strong>Publish:</strong> {{ book.book_press }}</p>
                    <p><strong>Publish Date:</strong>{{ book.book_publish_date }}</p>
                    <p><strong>Language:</strong> {{ book.book_language }}</p>
                    <p><strong>Theme:</strong> {{ book.book_category_choice }}</p>
                    <p><strong>Number:</strong> {{ book.book_number }}</p>
                </div>

                <div class="col-md-4">

                    <img src="../static/image/{{book.book_name}}.jpg" width="180" height="240" alt="...">

                </div>
            </div>
            <hr>
            <h4>Summary:</h4>
            <p>
                {{ book.book_summary }}
            </p>
        </div>

        <div class="col-md-4">
            <!-- 这里可以放公告或者一些小故事-->
            <h2 id="detail">评论模块</h2>

            <p>comment here</p>
        </div>
    </div>


    <hr>
</div>
{% endblock %}
<!-- /container -->

<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
{# 以下三者的引用顺序是固定的#}
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.js"></script>
<script src="https://cdn.bootcss.com/popper.js/1.15.0/umd/popper.js"></script>
<script src="https://cdn.bootcss.com/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>

</body>
</html>